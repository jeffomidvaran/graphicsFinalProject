<!DOCTYPE HTML> 
<html lang="en"> 
<head>
	<title>Final Project </title>
	<style>
		body {
			background-color: #EEEEEE;
		}
		label {
			white-space: pre;
		}
	</style>
	<meta charset="utf-8"> 


	<!-- VERTEX SHADER  -->
	<script type="x-shader/x-vertex" id="vshader-source" >
		attribute vec3 a_coords;
		attribute vec3 a_normal;
		attribute vec3 my_color;

		uniform mat4 modelview;
		uniform mat4 projection;

		uniform mat3 normalMatrix;
		uniform vec4 lightPosition;

		uniform vec4 diffuseColor;
		uniform vec3 specularColor;
		uniform float specularExponent;

		varying vec4 v_color;

		void main() {
			vec4 coords = vec4(a_coords,1.0);
			vec4 eyeCoords = modelview* coords;
			gl_Position = projection * eyeCoords;

			vec3 N, L, R, V;  // vectors for lighting equation
			N = normalize( normalMatrix*a_normal );
			if ( lightPosition.w == 0.0 ) {
				L = normalize( lightPosition.xyz );
			}
			else {
				L = normalize( lightPosition.xyz/lightPosition.w - eyeCoords.xyz );
			}
			R = -reflect(L,N);
			V = normalize( -eyeCoords.xyz);     // (Assumes a perspective projection.)
			
			if ( dot(L,N) <= 0.0 ) {
				v_color = vec4(0,0,0,1);
			}
			else {
				vec3 color = 0.8*dot(L,N) * diffuseColor.rgb;  // 0.8 is diffuse intensity of light
				if (dot(R,V) > 0.0) {
					color += 0.4*pow(dot(R,V),specularExponent) * specularColor; // 0.4 is specular intensity of light
				}
				//v_color = vec4(color, diffuseColor.a);
				v_color = vec4(my_color, diffuseColor.a);
			}
		}
	</script>
	

	<script type="x-shader/x-fragment" id="fshader-source" >
		precision mediump float;
		varying vec4 v_color;
		void main() {
			gl_FragColor = v_color;
		}
	</script>

	<script src="gl-matrix-min.js"></script> 
	<script type="text/javascript" src="webgl-utils.js"></script>
	<script src="trackball-rotator.js"></script>
	<script src="models.js"></script>   
	<script src="finalProject.js"></script>   


</head>


<body onload="init();">
	<form id="input_form">
		<fieldset>
			Name: Jeffrey Omidvaran <br/>
			Student ID: 32332249 <br/>
		</fieldset>
	</form>
	<div id="canvas-holder"> </div>
		<canvas id="myGLCanvas" width="1400" height="1400"></canvas>
	</div>
</body>
</html>
